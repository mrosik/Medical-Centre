<h1>List of all doctors</h1>

<table>
  <tr>
    <th>First name</th>
    <th>Last name</th>
    <% if current_user %>
        <% if current_user.admin %>
            <th>Dob</th>
            <th>Pps no</th>
        <% end %>
    <% end %>
    <th>Email</th>
    <th>Gender</th>
    <th>Specialization</th>
    <% if current_user %>
        <% if current_user.admin %>
            <th colspan="3">Action</th>
        <% end %>
    <% end %>
  </tr>

  <% @doctors.each do |doctor| %>
      <tr>
        <td><%= doctor.first_name %></td>
        <td><%= doctor.last_name %></td>
        <% if current_user %>
            <% if current_user.admin %>
                <td><%= doctor.dob %></td>
                <td><%= doctor.pps_no %></td>
            <% end %>
        <% end %>
        <td><%= doctor.email %></td>
        <td><%= doctor.gender %></td>
        <td><%= doctor.specialisations.map(&:name).join(", ") %></td>
        <% if current_user %>
            <% if current_user.admin %>
                <td><%= link_to 'Show', doctor %></td>
                <td><%= link_to 'Edit', edit_doctor_path(doctor) %></td>
                <td><%= link_to 'Destroy', doctor, method: :delete, data: {confirm: 'Are you sure?'} %></td>
            <% end %>
        <% end %>
      </tr>
  <% end %>
</table>

<br/>

<%= link_to 'New Doctor', new_doctor_path %>

